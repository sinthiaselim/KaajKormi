{% extends 'base.html' %}

{% block content %}
<div class="auth-card" style="max-width: 500px;">
    <div class="auth-header">
        <h2>Create Account</h2>
        <p>Join KaajKormi today</p>
    </div>

    <div class="tab-group">
        <div class="tab active" onclick="setRole('customer')">Customer</div>
        <div class="tab" onclick="setRole('worker')">Worker</div>
    </div>

    <form method="POST">
        <input type="hidden" name="role" id="roleInput" value="customer">

        <div class="form-group">
            <label for="name" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="name" name="name" required>
        </div>

        <div class="form-group">
            <label for="email" class="form-label">Email Address</label>
            <input type="email" class="form-control" id="email" name="email" required>
        </div>

        <div class="form-group">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" name="password" required>
        </div>

        <div class="form-group">
            <label for="phone" class="form-label">Phone Number</label>
            <input type="tel" class="form-control" id="phone" name="phone" required>
        </div>

        <div class="form-group">
            <label for="address" class="form-label">Address</label>
            <textarea class="form-control" id="address" name="address" rows="2"></textarea>
        </div>

        <!-- Worker Specific Fields -->
        <div id="workerFields" style="display: none;">
            <div class="form-group">
                <label for="job_category" class="form-label">Job Category</label>
                <select class="form-select" id="job_category" name="job_category">
                    <option value="electrician">Electrician</option>
                    <option value="plumber">Plumber</option>
                    <option value="house_help">House Help</option>
                    <option value="cleaner">Cleaner</option>
                    <option value="driver">Driver</option>
                    <option value="painter">Painter</option>
                    <option value="ac_repair">AC Repair</option>
                    <option value="gardener">Gardener</option>
                </select>
            </div>

            <div class="form-group">
                <label for="wage" class="form-label">Hourly Wage (BDT)</label>
                <input type="number" class="form-control" id="wage" name="wage" min="0" step="0.01">
            </div>
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">Register</button>
    </form>

    <p style="text-align: center; margin-top: 1rem;">
        Already have an account? <a href="{{ url_for('login') }}">Login</a>
    </p>

    <script>
        function setRole(role) {
            document.getElementById('roleInput').value = role;
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(t => t.classList.remove('active'));

            if (role === 'customer') {
                tabs[0].classList.add('active');
                document.getElementById('workerFields').style.display = 'none';
                document.getElementById('job_category').required = false;
                document.getElementById('wage').required = false;
            } else {
                tabs[1].classList.add('active');
                document.getElementById('workerFields').style.display = 'block';
                document.getElementById('job_category').required = true;
                document.getElementById('wage').required = true;
            }
        }
    </script>
</div>
{% endblock %}